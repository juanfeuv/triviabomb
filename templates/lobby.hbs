<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>TriviaBomb: {{name}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../lobby.css" />
    <link rel="icon" type="image/PNG" href="../icono.PNG">
    <script src="socket.io/socket.io.js"></script>
    <script>
        var socket = io();
        socket.on('users', users => {
            document.getElementById('list_users').innerHTML = users;
        });
        
        function ready() {
            console.log('ready');
            socket.emit('changeStatus', {
                status: true,
                username: `{{name}}`
            });
        }

        //http-request
        var xhttp = new XMLHttpRequest();
        xhttp.open("POST", "/inicio", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send("name={{name}}");
    </script>
</head>

<body>
    <header>
        <h1>Bienvenido {{name}}</h1>
        <h2>Sala de Espera</h2>
        <div id="ready_checkbox" onclick="ready()">Estoy listo!!</div>
    </header>
    <main>
        <ul id="list_users">
        </ul>
    </main>

</body>

</html>